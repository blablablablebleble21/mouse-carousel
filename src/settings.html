<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; font-src 'self' https://cdn.jsdelivr.net; script-src 'self';">
    <title>Mouse Carousel Settings</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="settings.css">
</head>
<body>
    <div class="settings-container">
        <header>
            <h1><i class="bi bi-gear-fill"></i> Mouse Carousel Settings</h1>
            <p class="subtitle">Customize your radial action menu</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="actions"><i class="bi bi-grid-3x3-gap-fill"></i> Actions</button>
            <button class="tab-btn" data-tab="appearance"><i class="bi bi-palette-fill"></i> Appearance</button>
            <button class="tab-btn" data-tab="hotkeys"><i class="bi bi-keyboard-fill"></i> Hotkeys</button>
            <button class="tab-btn" data-tab="about"><i class="bi bi-info-circle-fill"></i> About</button>
        </div>

        <div class="tab-content active" id="actions-tab">
            <div class="section">
                <h2>Actions (<span id="action-count">0</span>)</h2>
                <p class="hint">Add and configure actions for your carousel</p>
                
                <div id="actions-list" class="actions-list"></div>
                
                <button class="btn-primary" id="add-action-btn">
                    <i class="bi bi-plus-circle"></i> Add New Action
                </button>
                <button class="btn-warning" id="reset-actions" style="margin-left: 10px;">
                    <i class="bi bi-arrow-counterclockwise"></i> Reset Actions to Defaults
                </button>
            </div>
        </div>

        <div class="tab-content" id="appearance-tab">
            <div class="section">
                <h2>Colors & Theme</h2>
                
                <div class="form-group">
                    <label>Background Color</label>
                    <div class="color-input-group">
                        <input type="color" id="bgColor" class="color-picker">
                        <input type="text" id="bgColorText" class="color-text" placeholder="rgba(...)">
                    </div>
                    <label style="margin-top: 10px;">Opacity</label>
                    <div class="slider-group">
                        <input type="range" id="bgOpacity" min="0" max="100" value="90" class="slider">
                        <span class="slider-value" id="bgOpacityValue">90%</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Accent Color</label>
                    <div class="color-input-group">
                        <input type="color" id="accentColor" class="color-picker">
                        <input type="text" id="accentColorText" class="color-text">
                    </div>
                </div>

                <div class="form-group">
                    <label>Icon Color</label>
                    <div class="color-input-group">
                        <input type="color" id="iconColor" class="color-picker">
                        <input type="text" id="iconColorText" class="color-text">
                    </div>
                </div>

                <div class="form-group">
                    <label>Hover Icon Color</label>
                    <div class="color-input-group">
                        <input type="color" id="hoverIconColor" class="color-picker">
                        <input type="text" id="hoverIconColorText" class="color-text">
                    </div>
                </div>

                <div class="form-group">
                    <label>Ring Size</label>
                    <div class="slider-group">
                        <input type="range" id="ringSize" min="200" max="500" value="300" class="slider">
                        <span class="slider-value" id="ringSizeValue">300px</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Animation Speed</label>
                    <div class="slider-group">
                        <input type="range" id="animationSpeed" min="50" max="500" value="200" class="slider">
                        <span class="slider-value" id="animationSpeedValue">200ms</span>
                    </div>
                </div>

                <button class="btn-primary" id="save-appearance">
                    <i class="bi bi-check-circle"></i> Save Appearance
                </button>
                <button class="btn-warning" id="reset-appearance" style="margin-left: 10px;">
                    <i class="bi bi-arrow-counterclockwise"></i> Reset Appearance to Defaults
                </button>
            </div>
        </div>

        <div class="tab-content" id="hotkeys-tab">
            <div class="section">
                <h2>Keyboard Shortcuts</h2>
                
                <div class="form-group">
                    <label>Open Carousel</label>
                    <input type="text" id="carouselHotkey" class="hotkey-input" placeholder="e.g., CommandOrControl+Alt+Space">
                    <button class="btn-secondary" id="record-carousel-hotkey">
                        <i class="bi bi-record-circle"></i> Record New Hotkey
                    </button>
                </div>

                <div class="form-group">
                    <label>Open Settings</label>
                    <input type="text" id="settingsHotkey" class="hotkey-input" placeholder="e.g., Shift+Alt+Space">
                    <button class="btn-secondary" id="record-settings-hotkey">
                        <i class="bi bi-record-circle"></i> Record New Hotkey
                    </button>
                </div>

                <button class="btn-primary" id="save-hotkeys">
                    <i class="bi bi-check-circle"></i> Save Hotkeys
                </button>
                <button class="btn-warning" id="reset-hotkeys" style="margin-left: 10px;">
                    <i class="bi bi-arrow-counterclockwise"></i> Reset Hotkeys to Default
                </button>
            </div>
        </div>

        <div class="tab-content" id="about-tab">
            <div class="section about-section">
                <h2>About Mouse Carousel</h2>
                <p class="version">Version 2.0.0</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <i class="bi bi-shield-check"></i>
                        <div>
                            <strong>Secure</strong>
                            <p>No vulnerable packages, context isolation enabled</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-sliders"></i>
                        <div>
                            <strong>Customizable</strong>
                            <p>Fully configurable colors, sizes, and actions</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-lightning-charge"></i>
                        <div>
                            <strong>Fast</strong>
                            <p>Instant access with global hotkeys</p>
                        </div>
                    </div>
                </div>

                <div class="tips">
                    <h3>Tips & Tricks</h3>
                    <ul>
                        <li>Press <kbd>Ctrl+Alt+Space</kbd> to open the carousel</li>
                        <li>Press <kbd>Shift+Alt+Space</kbd> to open settings</li>
                        <li>Test actions before saving to ensure they work</li>
                        <li>Use keyboard actions for faster execution</li>
                        <li>Keep action count under 8 for best UX</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Modal -->
    <div id="action-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Action</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Action Name</label>
                    <input type="text" id="action-name" placeholder="e.g., Calculator">
                </div>

                <div class="form-group">
                    <label>Icon</label>
                    <div id="quick-icons" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; padding: 10px; background: rgba(50, 50, 50, 0.3); border-radius: 8px; border: 1px solid #374151;">
                        <!-- Quick icon picker populated by JS -->
                    </div>
                    <div class="icon-input-group">
                        <input type="text" id="action-icon" placeholder="bi-calculator">
                        <button type="button" class="btn-secondary" id="choose-icon" style="padding: 8px 16px; white-space: nowrap;">Browse All</button>
                        <a href="https://icons.getbootstrap.com/" target="_blank" class="btn-link">
                            View Icons
                        </a>
                    </div>
                    <div class="icon-preview">
                        <i id="icon-preview" class="bi bi-question-circle"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label>Action Type</label>
                    <select id="action-type">
                        <option value="keyboard">Keyboard Shortcut</option>
                        <option value="exec">Execute Command</option>
                    </select>
                </div>

                <div id="keyboard-config" class="action-config">
                    <div class="form-group">
                        <label>Key</label>
                        <input type="text" id="key-input" placeholder="e.g., c">
                    </div>
                    <div class="form-group">
                        <label>Modifiers</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" value="control"> Ctrl</label>
                            <label><input type="checkbox" value="alt"> Alt</label>
                            <label><input type="checkbox" value="shift"> Shift</label>
                            <label><input type="checkbox" value="super"> Win</label>
                        </div>
                    </div>
                </div>

                <div id="exec-config" class="action-config" style="display:none;">
                    <div class="form-group">
                        <label>Command</label>
                        <input type="text" id="command-input" placeholder="e.g., calc.exe">
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="action-enabled" checked>
                        Enabled
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary modal-cancel">Cancel</button>
                <button class="btn-secondary" id="test-action-btn">
                    <i class="bi bi-play-circle"></i> Test
                </button>
                <button class="btn-primary" id="save-action-btn">Save</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <!-- Icon Picker Modal -->
    <div class="modal" id="icon-picker-modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>Choose Icon</h2>
                <button class="modal-close" onclick="document.getElementById('icon-picker-modal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="icon-search" placeholder="Search icons..." style="width: 100%; margin-bottom: 20px; padding: 12px; font-size: 1rem; border: 2px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text);">
                <div id="icon-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; max-height: 400px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <script src="settings.js"></script>
</body>
</html>
